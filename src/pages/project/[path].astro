---
import { parse } from 'node-html-parser'

import Layout from '~layouts/Main.astro'
import Content from '~components/Content.astro'
import Row from '~components/Page/Row.astro'
import Page from '~components/Page.astro'

import { projects } from '~data/layout.json'
import { get, create } from '~scripts/helpers'

export function getStaticPaths() {
  return get.StaticPaths(projects)
}

const { name, local } = Astro.props

const sections = create.sections(local.desc, '<h3')

const layoutProps = {
  title: 'Paul Heading | Project | ' + name,
  description: local.summary,
}
---

<Layout {...layoutProps}>
  <Content>
    <Page>
      {sections.map((section) => <Row>{parse(section)}</Row>)}
    </Page>
  </Content>
</Layout>
